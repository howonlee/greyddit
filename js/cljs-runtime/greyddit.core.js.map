{"version":3,"sources":["greyddit/core.cljs"],"mappings":"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","names":["js/greyddit","js/greyddit.core","js/greyddit.core.state","greyddit.core/state","reagent.core.atom","js/greyddit.core.subreddits","greyddit.core/subreddits","greyddit.core/mobile-button-style","var_args","G__20466","greyddit.core/delay-transition","js/Error","transition-fn","greyddit.core.delay_transition","preload-fn","delay-ms","cljs.core/rand-int","cljs.core.swap_BANG_","cljs.core/assoc","js/setTimeout","greyddit.core/fetch-json","url","on-success","on-error","js/window","res","err","js/console.error","greyddit.core/render-markdown","md","js/module$node_modules$marked$lib$marked_cjs","greyddit.core/build-reddit-url","subreddit","after","greyddit.core/handle-reddit-response","response","push-history?","clj-data","cljs.core.js__GT_clj","posts","cljs.core.get_in","new-after","greyddit.core/build-comments-url","id","greyddit.core/fetch-comments","vec__20467","cljs.core.nth","post","comments","_","G__20472","greyddit.core/fetch-reddit-posts","greyddit.core.fetch_reddit_posts","p1__20470#","greyddit.core/decode-url","s","clojure.string/replace","greyddit.core/reddit-image-url","direct-url","G__20473","greyddit.core/reddit-video-url","temp__5804__auto__","greyddit.core/reddit-gif-url","greyddit.core/is-youtube-url?","cljs.core/re-find","greyddit.core/gallery-images","media-data","cljs.core.get","ids","cljs.core.keep","p__20474","map__20475","cljs.core/--destructure-map","media_id","G__20476","greyddit.core/summarize-parent","parent","body","trimmed","cljs.core.subs","x__5090__auto__","y__5091__auto__","cljs.core/count","summary","G__20478","greyddit.core/flatten-comments","greyddit.core.flatten_comments","parent-map","cljs.core.reduce","p__20479","map__20480","acc","data","full-comment","parent-id","parent-summary","flattened","cljs.core.conj","reply-children","cljs.core/map?","cljs.core/seq","cljs.core.into","cljs.core.assoc","or__5002__auto__","greyddit.core/post-page","map__20482","cljs.core/deref","selected-post","video-url","image-url","gif-url","and__5000__auto__","gallery","cljs.core/not","cljs.core/last","clojure.string.split","iter__5480__auto__","s__20484","cljs.core/LazySeq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","b__20486","cljs.core/chunk-buffer","i__20485","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__20483","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","img-url","p1__20481#","cljs.core/re-matches","cljs.core.merge","flat-comments","s__20488","b__20490","i__20489","map__20491","iter__20487","map__20492","comment","greyddit.core/post-table","s__20495","b__20497","i__20496","map__20498","p1__20493#","iter__20494","map__20499","greyddit.core/home-page","s__20501","b__20503","i__20502","iter__20500","greyddit.core/subreddit-page","map__20504","error","greyddit.core/app","map__20505","view","loading?","G__20506","cljs.core/Keyword","greyddit.core/start","root","js/module$node_modules$react_dom$client.createRoot","js/document","reagent.core.as_element","greyddit.core/init","cljs.core/chunk-first"],"sourcesContent":["(ns greyddit.core\n  (:require\n    [\"marked\" :as marked]\n    [reagent.core :as r]\n    [\"react-dom/client\" :as rdom-client]))\n\n(defonce state (r/atom {:view :home\n                        :subreddit nil\n                        :posts []\n                        :after nil\n                        :selected-post nil\n                        :comments []\n                        :error nil\n                        :loading? false}))\n\n(defonce subreddits [\"askculinary\"\n                     \"askhistorians\"\n                     \"askscience\"\n                     \"clojure\"\n                     \"comics\"\n                     \"credibledefense\"\n                     \"curatedtumblr\"\n                     \"experienceddevs\"\n                     \"hobbydrama\"\n                     \"noncredibledefense\"\n                     \"personalfinance\"\n                     \"stardewvalley\"\n                     \"subredditdrama\"\n                     \"totalwar\"\n                     \"warcollege\"])\n\n(def mobile-button-style\n  {:padding \"1rem\"\n   :fontSize \"1.25rem\"\n   :borderRadius \"6px\"\n   :cursor \"pointer\"\n   :border \"1px solid #ccc\"\n   :background \"#f0f0f0\"\n   :textAlign \"left\"})\n\n(defn delay-transition\n  ([transition-fn]\n   (delay-transition nil transition-fn))\n  ([preload-fn transition-fn]\n   (let [delay-ms (+ 1000 (rand-int 6000))] ;; 1s to 7s\n     (swap! state assoc :loading? true)\n     (when preload-fn (preload-fn)) ;; start preload immediately\n     (js/setTimeout\n      (fn []\n        (swap! state assoc :loading? false)\n        (transition-fn))\n      delay-ms))))\n\n(defn fetch-json [url on-success on-error]\n  (-> (.fetch js/window url)\n      (.then (fn [res]\n               (if (.-ok res)\n                 (.json res)\n                 (throw (js/Error. \"Fetch failed\")))))\n      (.then on-success)\n      (.catch (fn [err]\n                (js/console.error err)\n                (on-error err)))))\n\n(defn render-markdown [md]\n  {:dangerouslySetInnerHTML\n   {:__html (.parse marked md)}})\n\n;; ====\n;; Handling subreddit listings\n;; ====\n\n(defn build-reddit-url [subreddit after]\n  (str \"https://www.reddit.com/r/\" subreddit \"/top.json?limit=20&t=week\"\n       (when after (str \"&after=\" after))))\n\n(defn handle-reddit-response [response push-history?]\n  (let [clj-data (js->clj response :keywordize-keys true)\n        posts (get-in clj-data [:data :children])\n        new-after (get-in clj-data [:data :after])]\n    (swap! state assoc\n           :posts posts\n           :after new-after\n           :error nil)))\n\n\n;; ===\n;; Handling comment listings\n;; ===\n\n(defn build-comments-url [subreddit id]\n  (str \"https://www.reddit.com/r/\" subreddit \"/comments/\" id \".json\"))\n\n(defn fetch-comments [subreddit id]\n  (let [url (build-comments-url subreddit id)]\n    (fetch-json url\n                (fn [response]\n                  (let [[post comments] (js->clj response :keywordize-keys true)]\n                    (swap! state assoc\n                           :selected-post (get-in post [:data :children 0 :data])\n                           :comments (get-in comments [:data :children])\n                           :view :post)))\n                (fn [_]\n                  (swap! state assoc :error \"Failed to load post or CORS error\")))))\n\n\n(defn fetch-reddit-posts\n  ([subreddit]\n   (fetch-reddit-posts subreddit nil false))\n  ([subreddit after push-history?]\n   (swap! state assoc :subreddit subreddit)\n   (let [url (build-reddit-url subreddit after)]\n     (fetch-json url\n                 #(handle-reddit-response % push-history?)\n                 (fn [_]\n                   (swap! state assoc :error \"Failed to load or CORS error\"))))))\n\n;; ===\n;; Dealing with posts\n;; ===\n\n(defn decode-url [s]\n  (clojure.string/replace s #\"&amp;\" \"&\"))\n\n(defn reddit-image-url [post]\n  (let [direct-url  (some-> (:url post) decode-url)]\n    direct-url))\n\n(defn reddit-video-url [post]\n  (when-let [url (get-in post [:media :reddit_video :fallback_url])]\n    (decode-url url)))\n\n(defn reddit-gif-url [post]\n  (when-let [url (get-in post [:media :reddit_video :fallback_url])]\n    (decode-url url)))\n\n(defn is-youtube-url? [url]\n  (re-find #\"(?i)youtube\\.com|youtu\\.be\" url))\n\n(defn gallery-images [post]\n  (let [media-data (get post :media_metadata)\n        ids (get-in post [:gallery_data :items])]\n    (keep (fn [{:keys [media_id]}]\n            (some-> (get-in media-data [media_id :s :u]) decode-url))\n          ids)))\n\n(defn summarize-parent [parent]\n  (when parent\n    (let [body (:body parent)\n          trimmed (subs body 0 (min 200 (count body)))\n          summary (if (< (count body) 200)\n                    trimmed\n                    (str trimmed \"\u2026\"))]\n      {:id (:id parent)\n       :author (:author parent)\n       :summary summary})))\n\n(defn flatten-comments\n  ([comments]\n   (flatten-comments comments nil))\n  ([comments parent-map]\n   (reduce\n    (fn [acc {:keys [data] :as full-comment}]\n      (let [id (:id data)\n            parent-id (:parent_id data)\n            parent-summary (summarize-parent (get parent-map parent-id))\n            flattened (conj acc {:comment data :parent parent-summary})\n            reply-children (when (map? (:replies data))\n                             (get-in data [:replies :data :children]))]\n        (if (seq reply-children)\n          (into flattened (flatten-comments reply-children (assoc parent-map (str \"t1_\" id) data)))\n          flattened)))\n    []\n    (or comments []))))\n\n\n(defn post-page []\n  (let [{:keys [selected-post comments]} @state\n        url (:url selected-post)\n        video-url (reddit-video-url selected-post)\n        image-url (reddit-image-url selected-post)\n        gif-url (when (and video-url (re-find #\"\\.gif\" url)) video-url)\n        gallery (gallery-images selected-post)]\n    [:div {:style {:padding \"2rem\"}}\n     [:button {:on-click #(swap! state assoc :view :subreddit :comments [] :selected-post nil)\n               :style mobile-button-style}\n      \"\u2190 Back to Subreddit\"]\n\n     (when selected-post\n       [:div\n        [:h2 (:title selected-post)]\n        [:p \"by \" [:b (:author selected-post)]]\n\n        ;; Reddit video\n        (when (and video-url (not gif-url))\n          [:video {:controls true :style {:max-width \"100%\" :margin \"1rem 0\"}}\n           [:source {:src video-url :type \"video/mp4\"}]])\n\n        ;; GIF (Reddit-hosted)\n        (when gif-url\n          [:video {:autoplay true :loop true :muted true\n                   :style {:max-width \"100%\" :margin \"1rem 0\"}}\n           [:source {:src gif-url :type \"video/mp4\"}]])\n\n        ;; YouTube embed\n        (when (is-youtube-url? url)\n          [:iframe {:width \"100%\" :height \"400\"\n                    :src (str \"https://www.youtube.com/embed/\"\n                              (last (clojure.string/split url #\"[=/]\")))\n                    :frameBorder \"0\" :allow \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                    :allowFullScreen true\n                    :style {:margin \"1rem 0\"}}])\n\n        ;; Gallery (Reddit image gallery)\n        (when (seq gallery)\n          [:div {:style {:display \"flex\" :gap \"1rem\" :overflow \"auto\" :margin \"1rem 0\"}}\n           (for [img-url gallery]\n             ^{:key img-url}\n             [:img {:src img-url\n                    :style {:max-height \"300px\" :border \"1px solid #ccc\"}}])])\n\n        ;; Static image fallback\n        (when (and image-url\n                   (not video-url)\n                   (not (is-youtube-url? url))\n                   (re-matches #\"(?i).*\\.(jpg|jpeg|png|gif)$\" image-url))\n          [:img {:src image-url\n                 :style {:max-width \"100%\" :margin \"1rem 0\" :border \"1px solid #ccc\"}\n                 :on-error #(set! (.-display (.-style (.-target %))) \"none\")}])\n\n\n        ;; Self-text\n        (when (:selftext selected-post)\n          [:div (merge {:style {:marginTop \"0.5rem\"\n                                :background \"#f9f9f9\"\n                                :padding \"0.5rem\"\n                                :borderRadius \"4px\"}}\n                       (render-markdown (:selftext selected-post)))])\n\n        ;; Comments\n        [:h3 \"Comments\"]\n        (let [flat-comments (flatten-comments (or comments []))]\n          (if (seq flat-comments)\n            [:div\n             (for [{:keys [comment parent]} flat-comments\n                   :when (not (:stickied comment))]\n               ^{:key (:id comment)}\n               [:div {:style {:marginBottom \"2rem\"}}\n                (when parent\n                  [:div {:style {:background \"#eee\"\n                                 :padding \"0.5rem\"\n                                 :marginBottom \"0.5rem\"\n                                 :borderRadius \"4px\"\n                                 :fontStyle \"italic\"}}\n                   [:p [:b (:author parent)] \":\"]\n                   [:div (render-markdown (:summary parent))]])\n\n                [:div {:style {:background \"#f9f9f9\"\n                               :padding \"0.75rem\"\n                               :borderRadius \"4px\"\n                               :border \"1px solid #ddd\"}}\n                 [:p [:b (:author comment)] \":\"]\n                 [:div (when (:body comment) (render-markdown (:body comment)))]]])]\n            [:p \"No comments or failed to load.\"]))])]))\n\n(defn post-table [posts]\n  [:div {:style {:overflowX \"auto\" :maxWidth \"100%\"}}\n   [:table {:style {:borderCollapse \"collapse\"\n                    :width \"100%\"\n                    :minWidth \"500px\"}} ;; keeps layout readable on large screens\n    [:thead\n     [:tr\n      [:th {:style {:textAlign \"left\" :padding \"0.5rem\" :borderBottom \"1px solid #ccc\"}} \"Title\"]\n      [:th {:style {:textAlign \"left\" :padding \"0.5rem\" :borderBottom \"1px solid #ccc\"}} \"Author\"]\n      [:th {:style {:textAlign \"left\" :padding \"0.5rem\" :borderBottom \"1px solid #ccc\"}} \"Upvotes\"]]]\n    [:tbody\n     (for [{:keys [data]} posts]\n       ^{:key (:id data)}\n       [:tr\n        [:td {:style {:padding \"1.5rem\" :borderBottom \"1px solid #eee\"}}\n         [:a {:href \"#\"\n              :on-click #(do\n                           (.preventDefault %)\n                           (delay-transition\n                             (fn [] (fetch-comments (:subreddit @state) (:id data))) ;; preload\n                             (fn [] (swap! state assoc :view :post))))}\n          (:title data)]]\n        [:td {:style {:padding \"0.5rem\" :borderBottom \"1px solid #eee\"}} (:author data)]\n        [:td {:style {:padding \"0.5rem\" :borderBottom \"1px solid #eee\"}} (:ups data)]])]]])\n\n\n(defn home-page []\n  [:div {:style {:padding \"2rem\"}}\n   [:h1 \"Welcome to Greyddit\"]\n   [:p \"Select a subreddit:\"]\n\n   [:div {:style {:display \"flex\"\n                  :flexDirection \"column\"\n                  :gap \"1rem\"\n                  :marginTop \"1rem\"}}\n    (for [s subreddits]\n      ^{:key s}\n      [:button\n       {:on-click #(delay-transition\n                     (fn [] (fetch-reddit-posts s)) ;; preload\n                     (fn [] (swap! state assoc :view :subreddit :subreddit s)))\n        :style mobile-button-style}\n       (str \"r/\" s)])]])\n\n(defn subreddit-page []\n  (let [{:keys [subreddit posts error after]} @state]\n    [:div {:style {:padding \"2rem\"}}\n     [:h1 (str \"Top r/\" subreddit \" Posts\")]\n     [:div {:style {:display \"flex\"\n                    :flexWrap \"wrap\"\n                    :gap \"0.5rem\"\n                    :marginBottom \"1rem\"}}\n      [:button\n       {:on-click #(delay-transition nil (fn [] (swap! state assoc :view :home)))\n        :style mobile-button-style}\n       \"\u2190 Back to Home\"]\n\n      (when after\n        [:button {:on-click #(fetch-reddit-posts subreddit after false)\n                  :style mobile-button-style}\n         \"Next Page \u2192\"])]\n     (when error\n       [:p {:style {:color \"red\"}} error])\n     (when (seq posts)\n       [post-table posts])]))\n\n(defn app []\n  (let [{:keys [view loading?]} @state]\n    (if loading?\n      [:div {:style {:padding \"2rem\"}}\n       [:h2 \"Loading...\"]\n       [:div {:style {:width \"3rem\"\n                      :height \"3rem\"\n                      :border \"4px solid #ccc\"\n                      :borderTop \"4px solid #333\"\n                      :borderRadius \"50%\"\n                      :animation \"spin 1s linear infinite\"}}]]\n      (case view\n        :home [home-page]\n        :subreddit [subreddit-page]\n        :post [post-page]\n        [:div \"Unknown view\"]))))\n\n(defn ^:dev/after-load start []\n  (let [root (rdom-client/createRoot (.getElementById js/document \"app\"))]\n    (.render root (r/as-element [app]))))\n\n(defn ^:export init []\n  (start))\n"]}